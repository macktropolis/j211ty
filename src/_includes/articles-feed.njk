---
layout: 'base.njk'
pageClass: 'blog'
---
{% set pageHeaderTitle = title %}
{% set pageHeaderSummary = content %}
{% set postListItems = pagination.items %}

{# If this is a tag, grab those items instead as one large collection #}
{% if tag %}
  {% set postListItems = collections[tag] %}
  {% set pageHeaderTitle = 'Articles filed under &ldquo;' + tag + '&rdquo;' %}
{% endif %}

{% block content %}
  {% include "_page-header.njk" %}

  <section class="articles all" id="article-list">
    <div class="container__inner flow grid">
      {% if postListHeadline %}
      <h2 class="headline measure-micro" data-highlight="primary">
        {{ postListHeadline }}
      </h2>
      {% endif %}
        <ul role="list" class="articles__list flow">
          {% for item in postListItems %}
            <li class="post-list__item leading-tight measure-long">
              <article class="snippet">
                  <h3 class="snippet__title">
                      <a href="{{ item.url }}">
                          {{ item.data.title }}
                      </a>
                  </h3>
                  <p class="snippet__meta">
                      <span class="snippet__author">{{ item.data.author }}</span> &bull;
                      <span class="snippet__date">{{ item.date | postDate }}</span>
                  </p>
                  <p class="snippet__body">{{ item.data.description }}</p>
                  <a href="{{ item.url }}" class="btn btn--primary">Continue Reading</a>
              </article>
              <aside><img src="{{ item.data.image }}" alt="{{ item.data.imageAlt }}" class="snippet__image"></aside>
          </li>
          {% endfor %}
        </ul>
        
        {# If we leave pagination in for tags, the next and prev links will 
        link to tags and be rather confusing, so don't render in that situation #}
        {% if not tag %}
          {% include '_pagination.njk' %}
        {% endif %}
          
    </div>  
  </section>
{% endblock %}
